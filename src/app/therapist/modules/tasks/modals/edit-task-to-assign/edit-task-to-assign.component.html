<div class="container">
    <div class="modal-header">
        <h4 class="modal-title"><fa-icon [icon]="iconTask"></fa-icon> Editar detalle de tarea</h4>
    </div>
    <div class="modal-body">
        <form [formGroup]="taskDetailForm">
            <div class="row">
                <!--Título-->
                <div class="col-12 col-md-8 mb-3">
                    <label class="mb-1"><b>Título*</b></label>
                    <input 
                        type="text" 
                        class="form-control form-control-lg bg-light fs-6" 
                        formControlName="title"
                        placeholder="Título*" 
                        readonly />
                </div>
                <!-- Fecha de vencimiento -->
                <div class="col-12 col-md-4 mb-3">
                    <label class="mb-1"><b>Fecha de vencimiento*</b></label>
                    <input 
                        type="date" 
                        placeholder="Fecha de vencimiento*"
                        class="form-control form-control-lg bg-light fs-6"
                        formControlName="dueDate"
                        [min]="getToday()"
                        [ngClass]="{
                            'is-valid': taskDetailForm.get('dueDate')?.valid && taskDetailForm.get('dueDate')?.touched,
                            'is-invalid': taskDetailForm.get('dueDate')?.invalid && taskDetailForm.get('dueDate')?.touched
                        }" />
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('dueDate')?.hasError('required')">
                        <small>¡Este campo es requerido!</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <!-- Repeticiones -->
                <div class="col-12 col-md-6 mb-3">
                    <label class="mb-1"><b>Repeticiones*</b></label>
                    <input 
                        type="number" 
                        class="form-control form-control-lg bg-light fs-6" 
                        formControlName="repetitions"
                        placeholder="Repeticiones*"
                        [min]="1"
                        [ngClass]="{
                            'is-valid': taskDetailForm.get('repetitions')?.valid && taskDetailForm.get('repetitions')?.touched,
                            'is-invalid': taskDetailForm.get('repetitions')?.invalid && taskDetailForm.get('repetitions')?.touched
                        }" />
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('repetitions')?.hasError('required')">
                        <small>¡Este campo es requerido!</small>
                    </div>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('repetitions')?.hasError('min')">
                        <small>¡La repetición debe ser mínimo 1!</small>
                    </div>
                </div>
                <!-- Tiempo por repetición -->
                <div class="col-12 col-md-6 mb-3">
                    <label class="mb-1"><b>Tiempo por repetición*</b></label>
                    <input 
                        type="text" 
                        class="form-control form-control-lg bg-light fs-6" 
                        formControlName="timePerRepetition"
                        placeholder="Tiempo por repetición*"
                        aria-describeby="timePerRepetitionFormatt"
                        [ngClass]="{
                            'is-valid': taskDetailForm.get('timePerRepetition')?.valid && taskDetailForm.get('timePerRepetition')?.touched,
                            'is-invalid': taskDetailForm.get('timePerRepetition')?.invalid && taskDetailForm.get('timePerRepetition')?.touched
                        }" />
                    <div id="timePerRepetitionFormatt" class="form-text">
                        Formato: <b>mm:ss</b>
                    </div>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('timePerRepetition')?.hasError('required')">
                        <small>¡Este campo es requerido!</small>
                    </div>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('timePerRepetition')?.hasError('pattern')">
                        <small>¡Este campo debe cumplir con el formato mm:ss (minutos:segundos)!</small>
                    </div>
                </div>
                <!-- Series -->
                <div class="col-12 col-md-6 mb-3">
                    <label class="mb-1"><b>Series*</b></label>
                    <input 
                        type="number" 
                        class="form-control form-control-lg bg-light fs-6" 
                        formControlName="series"
                        placeholder="Series*"
                        [min]="1"
                        [ngClass]="{
                            'is-valid': taskDetailForm.get('series')?.valid && taskDetailForm.get('series')?.touched,
                            'is-invalid': taskDetailForm.get('series')?.invalid && taskDetailForm.get('series')?.touched
                        }" />
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('series')?.hasError('required')">
                        <small>¡Este campo es requerido!</small>
                    </div>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('series')?.hasError('min')">
                        <small>¡La serie debe ser mínimo 1!</small>
                    </div>
                </div>
                <!-- Tiempo de descanso -->
                <div class="col-12 col-md-6 mb-3">
                    <label class="mb-1"><b>Tiempo de descanso</b></label>
                    <input 
                        type="text" 
                        class="form-control form-control-lg bg-light fs-6" 
                        formControlName="breakTime"
                        placeholder="Tiempo de descanso"
                        aria-describeby="breakTimeFormatt"
                        [ngClass]="{
                            'is-valid': taskDetailForm.get('breakTime')?.valid && taskDetailForm.get('breakTime')?.touched,
                            'is-invalid': taskDetailForm.get('breakTime')?.invalid && taskDetailForm.get('breakTime')?.touched
                        }" />
                    <div id="breakTimeFormatt" class="form-text">
                        Formato: <b>mm:ss</b>
                    </div>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('breakTime')?.hasError('required')">
                        <small>¡Este campo es requerido!</small>
                    </div>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('breakTime')?.hasError('pattern')">
                        <small>¡Este campo debe cumplir con el formato mm:ss (minutos:segundos)!</small>
                    </div>
                </div>
            </div>
            <div class="row">
                <!--Descripción-->
                <div class="col-12 mb-3">
                    <label class="mb-1"><b>Descripción*</b></label>
                    <textarea 
                        class="form-control form-control-lg bg-light fs-6" 
                        formControlName="description"
                        placeholder="Descripción*" 
                        rows="7"
                        [ngClass]="{
                            'is-valid': taskDetailForm.get('description')?.valid && taskDetailForm.get('description')?.touched,
                            'is-invalid': taskDetailForm.get('description')?.invalid && taskDetailForm.get('description')?.touched
                        }"></textarea>
                    <div class="invalid-feedback"
                        *ngIf="taskDetailForm.get('description')?.hasError('required')">
                        <small>¡Este campo es requerido!</small>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <button type="button" (click)="addTaskEdited()" class="btn btn-next btn">Aceptar</button>
        <button (click)="modal.dismissAll()" class="btn btn-danger" type="button"><fa-icon></fa-icon> Cancelar</button>
    </div>
</div>